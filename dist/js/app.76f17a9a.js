(()=>{"use strict";var e={390:(e,s,t)=>{var n=t(669),o=t.n(n),r=t(963),a=t(252);const i={id:"home"},u=(0,a._)("h1",null,"Bonjour tout le monde ! Voici un aperçu du chat :",-1),l={key:0,class:"chatbox"},d={key:1},c=(0,a._)("h2",null,"Pas de message pour le moment :(",-1),h=[c],g=(0,a._)("h1",null,"Et maintenant les sons que vous balancez !",-1),p=["src"],m=(0,a.Uk)(" Votre navigateur ne supporte pas l'élément "),f=(0,a._)("code",null,"audio",-1),v=(0,a.Uk)(". "),w=[m,f,v];function y(e,s,t,n,o,r){const c=(0,a.up)("message-line");return(0,a.wg)(),(0,a.iD)("div",i,[u,r.hasMessages?((0,a.wg)(),(0,a.iD)("div",l,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.messages,(e=>((0,a.wg)(),(0,a.j4)(c,{message:e,key:e.id},null,8,["message"])))),128))])):((0,a.wg)(),(0,a.iD)("div",d,h)),g,(0,a._)("audio",{src:e.soundUri,autoplay:"",controls:"",ref:"player"},w,8,p)])}var b=t(577);function D(e,s,t,n,o,r){return(0,a.wg)(),(0,a.iD)("div",null,"["+(0,b.zw)(t.message.sent)+"] <"+(0,b.zw)(t.message.sender)+">: "+(0,b.zw)(t.message.message),1)}const O={name:"message-line",props:["message"]};var _=t(744);const U=(0,_.Z)(O,[["render",D]]),k=U;var S=t(264);const j=(0,S.ZP)(),M=10,L="!",P="assets/sounds/tts.mp3";function x(e){const s=new XMLHttpRequest;var t=!1;return s.open("HEAD",e,!1),s.onreadystatechange=function(){4===s.readyState&&(t=200===s.status||0===s.status)},s.send(null),t}function z(e){const s=Date.now();let t=null;do{t=Date.now()}while(t-s<e)}const H={messages:[],soundUri:"",playlist:[]},T={name:"Home",data:function(){return H},components:{MessageLine:k},created:function(){j.on("chat-message",(e=>{this.messages.length>M&&(this.messages=this.messages.slice(-(M-1))),this.getSound(e.message),e.sent=new Date(parseInt(e.sent)).toLocaleTimeString(),this.messages.push(e)}))},mounted:function(){const e=this.$refs.player;e.onended=s=>{this.soundUri="",this.playlist.length&&(this.soundUri=this.playlist.shift(),e.load())},e.onerror=function(){this.soundUri="",console.log("Error "+e.error.code+"; details: "+e.error.message)}},computed:{hasMessages:function(){return this.messages.length>0}},methods:{getSound:function(e){if(e.charAt(0)==L){const s=e.replace(L,"").toLowerCase();this.getSoundUri(s)}},getSoundUri:function(e){const s=Date.now(),t=e.startsWith("tts")?`${P}?t=${s}`:`${e}.mp3`;z(500),x(t)&&(this.$refs.player.ended&&0===this.playlist.length||!this.soundUri?this.soundUri=t:this.playlist.push(t))}}},$=(0,_.Z)(T,[["render",y]]),E=$,Z={class:"soundsList"},C=(0,a._)("h4",null,"Liste des sons disponibles :",-1);function R(e,s,t,n,o,r){return(0,a.wg)(),(0,a.iD)("div",Z,[C,(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.sounds,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.id},(0,b.zw)(e.soundname),1)))),128))])])}const q={sounds:[]},A={name:"sounds-list",data:function(){return q},mounted(){o().get("/soundslist").then((e=>this.sounds=e.data))}},K=(0,_.Z)(A,[["render",R]]),V=K;var Y=t(201);o().defaults.baseURL=window.location.origin;const B=[{path:"/home",component:E},{path:"/sounds",component:V},{path:"/:pathMatch(.*)*",redirect:"/sounds"}],F=(0,Y.p7)({routes:B,history:(0,Y.r5)()}),I=(0,r.ri)({});I.use(F),F.isReady().then((()=>I.mount("#app")))}},s={};function t(n){var o=s[n];if(void 0!==o)return o.exports;var r=s[n]={exports:{}};return e[n](r,r.exports,t),r.exports}t.m=e,(()=>{var e=[];t.O=(s,n,o,r)=>{if(!n){var a=1/0;for(d=0;d<e.length;d++){for(var[n,o,r]=e[d],i=!0,u=0;u<n.length;u++)(!1&r||a>=r)&&Object.keys(t.O).every((e=>t.O[e](n[u])))?n.splice(u--,1):(i=!1,r<a&&(a=r));if(i){e.splice(d--,1);var l=o();void 0!==l&&(s=l)}}return s}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,o,r]}})(),(()=>{t.n=e=>{var s=e&&e.__esModule?()=>e["default"]:()=>e;return t.d(s,{a:s}),s}})(),(()=>{t.d=(e,s)=>{for(var n in s)t.o(s,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:s[n]})}})(),(()=>{t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{t.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s)})(),(()=>{t.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{var e={143:0};t.O.j=s=>0===e[s];var s=(s,n)=>{var o,r,[a,i,u]=n,l=0;if(a.some((s=>0!==e[s]))){for(o in i)t.o(i,o)&&(t.m[o]=i[o]);if(u)var d=u(t)}for(s&&s(n);l<a.length;l++)r=a[l],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(d)},n=self["webpackChunktwitch_chatbot"]=self["webpackChunktwitch_chatbot"]||[];n.forEach(s.bind(null,0)),n.push=s.bind(null,n.push.bind(n))})();var n=t.O(void 0,[998],(()=>t(390)));n=t.O(n)})();
//# sourceMappingURL=app.76f17a9a.js.map